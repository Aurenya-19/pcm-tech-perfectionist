<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCM √ó Tech Perfectionist - Ultimate Complete Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #1a1f3a;
            --accent-1: #00d4ff;
            --accent-2: #7b2cbf;
            --accent-3: #ff006e;
            --accent-4: #ffbe0b;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --success: #00ff88;
            --error: #ff4444;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #2d1b69 100%);
        }
        .animated-bg::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 212, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 0, 110, 0.15) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }
        .app { display: flex; min-height: 100vh; }
        .sidebar {
            width: 280px;
            background: rgba(26, 31, 58, 0.95);
            backdrop-filter: blur(30px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem 1rem;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }
        .sidebar::-webkit-scrollbar { width: 6px; }
        .sidebar::-webkit-scrollbar-thumb { background: var(--accent-1); border-radius: 3px; }
        .logo {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        .logo h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .user-info {
            background: rgba(0, 212, 255, 0.1);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .user-info .user-name {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        .user-info .user-progress {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .nav-section { margin-bottom: 2rem; }
        .nav-section h3 {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent-1);
            margin-bottom: 1rem;
            padding-left: 0.5rem;
            font-weight: 800;
        }
        .nav-btn {
            width: 100%;
            padding: 0.9rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            text-align: left;
            font-size: 0.9rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
            margin-bottom: 0.4rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }
        .nav-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            color: var(--text-primary);
            transform: translateX(5px);
        }
        .nav-btn.active {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(255, 0, 110, 0.2));
            color: var(--text-primary);
        }
        .main-content {
            margin-left: 280px;
            padding: 2.5rem;
            width: calc(100% - 280px);
            min-height: 100vh;
        }
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .page-title {
            font-family: 'Poppins', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
        }
        .card {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            transition: all 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 212, 255, 0.2);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        .topic-card, .quest-card {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.8rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        .topic-card:hover, .quest-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-1);
            box-shadow: 0 10px 40px rgba(0, 212, 255, 0.3);
        }
        .topic-card.completed::after {
            content: '‚úì';
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 24px;
            height: 24px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .topic-icon { font-size: 2.5rem; margin-bottom: 1rem; }
        .topic-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 0.5rem; }
        .topic-desc { color: var(--text-secondary); font-size: 0.9rem; }
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-3));
            color: white;
            transition: all 0.3s;
            font-size: 1rem;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.5);
        }
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Auth Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        .auth-modal.hidden { display: none; }
        .auth-box {
            background: rgba(26, 31, 58, 0.95);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 3rem;
            max-width: 450px;
            width: 90%;
        }
        .auth-box h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .input-group {
            margin-bottom: 1.5rem;
        }
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .input-group input {
            width: 100%;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
        }
        .input-group input:focus {
            outline: none;
            border-color: var(--accent-1);
        }
        
        /* Music Player */
        .music-player {
            background: rgba(26, 31, 58, 0.8);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 2.5rem;
            margin-bottom: 2rem;
        }
        .album-art {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-3));
            border-radius: 20px;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            animation: pulse 3s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .song-info {
            text-align: center;
            margin-bottom: 2rem;
        }
        .song-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }
        .song-artist {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 1rem;
            cursor: pointer;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-1), var(--accent-3));
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s;
        }
        .music-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .control-btn:hover {
            background: var(--accent-1);
            transform: scale(1.1);
        }
        .control-btn.play {
            width: 80px;
            height: 80px;
            font-size: 2rem;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-3));
        }
        
        /* Quest Card */
        .quest-level {
            display: inline-block;
            padding: 0.4rem 1rem;
            background: rgba(255, 190, 11, 0.2);
            border: 1px solid var(--accent-4);
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--accent-4);
            margin-bottom: 1rem;
        }
        .quest-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        .quest-tag {
            padding: 0.3rem 0.8rem;
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid var(--accent-1);
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Notes System */
        .notes-editor {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .notes-input {
            width: 100%;
            min-height: 400px;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            resize: vertical;
        }
        .notes-preview {
            padding: 1.5rem;
            background: rgba(26, 31, 58, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            min-height: 400px;
        }
        
        @media (max-width: 1024px) {
            .sidebar { width: 100%; height: auto; position: relative; }
            .main-content { margin-left: 0; width: 100%; }
            .notes-editor { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    
    <!-- Auth Modal -->
    <div id="auth-modal" class="auth-modal">
        <div class="auth-box">
            <h2 id="auth-title">Welcome to PCM √ó Tech!</h2>
            <div id="login-form">
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="login-email" placeholder="your@email.com">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button class="btn" style="width: 100%; margin-bottom: 1rem;" onclick="login()">Login</button>
                <button class="btn btn-secondary" style="width: 100%;" onclick="showSignup()">Create Account</button>
            </div>
            <div id="signup-form" style="display: none;">
                <div class="input-group">
                    <label>Name</label>
                    <input type="text" id="signup-name" placeholder="Your Name">
                </div>
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="signup-email" placeholder="your@email.com">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="signup-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button class="btn" style="width: 100%; margin-bottom: 1rem;" onclick="signup()">Sign Up</button>
                <button class="btn btn-secondary" style="width: 100%;" onclick="showLogin()">Back to Login</button>
            </div>
        </div>
    </div>
    
    <div class="app" id="main-app" style="display: none;">
        <nav class="sidebar">
            <div class="logo">
                <h1>PCM √ó Tech</h1>
                <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">Ultimate Platform</p>
            </div>
            
            <div class="user-info">
                <div class="user-name" id="user-name">Loading...</div>
                <div class="user-progress" id="user-progress">0/40 topics ‚Ä¢ 0/50 quests</div>
            </div>
            
            <div class="nav-section">
                <h3>Main</h3>
                <button class="nav-btn active" data-page="dashboard">
                    <i class="fas fa-home"></i> Dashboard
                </button>
            </div>
            
            <div class="nav-section">
                <h3>Learn</h3>
                <button class="nav-btn" data-page="physics">
                    <i class="fas fa-atom"></i> Physics (10)
                </button>
                <button class="nav-btn" data-page="chemistry">
                    <i class="fas fa-flask"></i> Chemistry (10)
                </button>
                <button class="nav-btn" data-page="maths">
                    <i class="fas fa-square-root-alt"></i> Maths (10)
                </button>
                <button class="nav-btn" data-page="tech">
                    <i class="fas fa-laptop-code"></i> Tech (10)
                </button>
            </div>
            
            <div class="nav-section">
                <h3>Practice</h3>
                <button class="nav-btn" data-page="quests">
                    <i class="fas fa-gamepad"></i> Quests (50)
                </button>
                <button class="nav-btn" data-page="problems">
                    <i class="fas fa-pencil-alt"></i> Problems (100)
                </button>
                <button class="nav-btn" data-page="flashcards">
                    <i class="fas fa-layer-group"></i> Flashcards
                </button>
                <button class="nav-btn" data-page="tests">
                    <i class="fas fa-clipboard-list"></i> Tests
                </button>
            </div>
            
            <div class="nav-section">
                <h3>Tools</h3>
                <button class="nav-btn" data-page="code-editor">
                    <i class="fas fa-code"></i> Code Editor
                </button>
                <button class="nav-btn" data-page="notes">
                    <i class="fas fa-sticky-note"></i> Notes
                </button>
                <button class="nav-btn" data-page="pomodoro">
                    <i class="fas fa-clock"></i> Pomodoro
                </button>
                <button class="nav-btn" data-page="music">
                    <i class="fas fa-music"></i> Music
                </button>
            </div>
            
            <div class="nav-section">
                <button class="btn btn-secondary" style="width: 100%;" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </nav>
        
        <main class="main-content">
            <!-- Dashboard -->
            <div id="dashboard" class="page active">
                <h1 class="page-title">Dashboard</h1>
                <p class="page-subtitle">Your Complete Learning Journey</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1.5rem; margin-bottom: 3rem;">
                    <div class="card" style="text-align: center; padding: 2rem;">
                        <div style="font-size: 2.5rem; font-weight: 900; background: linear-gradient(135deg, var(--accent-1), var(--accent-3)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">40</div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;">Topics</div>
                    </div>
                    <div class="card" style="text-align: center; padding: 2rem;">
                        <div style="font-size: 2.5rem; font-weight: 900; background: linear-gradient(135deg, var(--accent-1), var(--accent-3)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">50</div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;">Quests</div>
                    </div>
                    <div class="card" style="text-align: center; padding: 2rem;">
                        <div style="font-size: 2.5rem; font-weight: 900; background: linear-gradient(135deg, var(--accent-1), var(--accent-3)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">100</div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;">Problems</div>
                    </div>
                    <div class="card" style="text-align: center; padding: 2rem;">
                        <div style="font-size: 2.5rem; font-weight: 900; background: linear-gradient(135deg, var(--accent-1), var(--accent-3)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="completed-count">0</div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;">Completed</div>
                    </div>
                    <div class="card" style="text-align: center; padding: 2rem;">
                        <div style="font-size: 2.5rem; font-weight: 900; background: linear-gradient(135deg, var(--accent-1), var(--accent-3)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="problems-solved">0</div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;">Solved</div>
                    </div>
                    <div class="card" style="text-align: center; padding: 2rem;">
                        <div style="font-size: 2.5rem; font-weight: 900; background: linear-gradient(135deg, var(--accent-1), var(--accent-3)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="study-time">0h</div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;">Study Time</div>
                    </div>
                </div>
                
                <div class="card">
                    <h2 style="font-size: 1.8rem; margin-bottom: 1.5rem;">üöÄ Complete Learning Platform</h2>
                    <p style="font-size: 1.05rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: 2rem;">
                        <strong>40 Topics</strong> across Physics, Chemistry, Maths, Tech ‚Ä¢ 
                        <strong>50 PCM √ó Tech Quests</strong> ‚Ä¢ 
                        <strong>100 Practice Problems</strong> ‚Ä¢ 
                        Interactive Code Editor ‚Ä¢ Flashcards ‚Ä¢ Mock Tests ‚Ä¢ Pomodoro Timer ‚Ä¢ Music Player ‚Ä¢ Notes System
                    </p>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn" onclick="navigateTo('physics')">Start Learning</button>
                        <button class="btn" onclick="navigateTo('quests')">PCM √ó Tech Quests</button>
                        <button class="btn" onclick="navigateTo('problems')">Practice Problems</button>
                        <button class="btn" onclick="navigateTo('music')">Study Music</button>
                    </div>
                </div>
            </div>
            
            <!-- All other pages will be loaded dynamically -->
            <div id="physics" class="page"></div>
            <div id="chemistry" class="page"></div>
            <div id="maths" class="page"></div>
            <div id="tech" class="page"></div>
            <div id="quests" class="page"></div>
            <div id="problems" class="page"></div>
            <div id="flashcards" class="page"></div>
            <div id="tests" class="page"></div>
            <div id="code-editor" class="page"></div>
            <div id="notes" class="page"></div>
            <div id="pomodoro" class="page"></div>
            <div id="music" class="page"></div>
        </main>
    </div>
    
    <script src="https://cdn.jsdelivr.net/gh/Aurenya-19/pcm-tech-complete@main/app.js"></script>
    <script>
        // Fallback if external JS doesn't load - Complete inline implementation
        if (typeof initApp === 'undefined') {
            console.log('Loading inline app...');
            
            // User Management
            let currentUser = null;
            let userProgress = {
                completedTopics: [],
                completedQuests: [],
                problemsSolved: 0,
                studyTime: 0
            };
            
            function showLogin() {
                document.getElementById('auth-title').textContent = 'Welcome Back!';
                document.getElementById('login-form').style.display = 'block';
                document.getElementById('signup-form').style.display = 'none';
            }
            
            function showSignup() {
                document.getElementById('auth-title').textContent = 'Create Account';
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('signup-form').style.display = 'block';
            }
            
            function login() {
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                if (email && password) {
                    currentUser = { email, name: email.split('@')[0] };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    loadUserProgress();
                    document.getElementById('auth-modal').classList.add('hidden');
                    document.getElementById('main-app').style.display = 'flex';
                    updateUserInfo();
                    initializeApp();
                } else {
                    alert('Please enter email and password');
                }
            }
            
            function signup() {
                const name = document.getElementById('signup-name').value;
                const email = document.getElementById('signup-email').value;
                const password = document.getElementById('signup-password').value;
                
                if (name && email && password) {
                    currentUser = { email, name };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    userProgress = { completedTopics: [], completedQuests: [], problemsSolved: 0, studyTime: 0 };
                    saveUserProgress();
                    document.getElementById('auth-modal').classList.add('hidden');
                    document.getElementById('main-app').style.display = 'flex';
                    updateUserInfo();
                    initializeApp();
                } else {
                    alert('Please fill all fields');
                }
            }
            
            function logout() {
                localStorage.removeItem('currentUser');
                location.reload();
            }
            
            function loadUserProgress() {
                const saved = localStorage.getItem('userProgress_' + currentUser.email);
                if (saved) {
                    userProgress = JSON.parse(saved);
                }
            }
            
            function saveUserProgress() {
                localStorage.setItem('userProgress_' + currentUser.email, JSON.stringify(userProgress));
            }
            
            function updateUserInfo() {
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('user-progress').textContent = `${userProgress.completedTopics.length}/40 topics ‚Ä¢ ${userProgress.completedQuests.length}/50 quests`;
                document.getElementById('completed-count').textContent = userProgress.completedTopics.length + userProgress.completedQuests.length;
                document.getElementById('problems-solved').textContent = userProgress.problemsSolved;
                document.getElementById('study-time').textContent = userProgress.studyTime + 'h';
            }
            
            // Check if user is logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                loadUserProgress();
                document.getElementById('auth-modal').classList.add('hidden');
                document.getElementById('main-app').style.display = 'flex';
                updateUserInfo();
                setTimeout(initializeApp, 100);
            }
            
            // Navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const page = btn.dataset.page;
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                    document.getElementById(page).classList.add('active');
                    loadPage(page);
                });
            });
            
            function navigateTo(page) {
                document.querySelector(`[data-page="${page}"]`)?.click();
            }
            
            function loadPage(page) {
                const pageEl = document.getElementById(page);
                if (pageEl.innerHTML.trim() === '') {
                    // Load page content dynamically
                    if (['physics', 'chemistry', 'maths', 'tech'].includes(page)) {
                        loadSubjectPage(page, pageEl);
                    } else if (page === 'quests') {
                        loadQuestsPage(pageEl);
                    } else if (page === 'problems') {
                        loadProblemsPage(pageEl);
                    } else if (page === 'music') {
                        loadMusicPage(pageEl);
                    } else if (page === 'notes') {
                        loadNotesPage(pageEl);
                    } else if (page === 'code-editor') {
                        loadCodeEditorPage(pageEl);
                    } else if (page === 'pomodoro') {
                        loadPomodoroPage(pageEl);
                    } else if (page === 'flashcards') {
                        loadFlashcardsPage(pageEl);
                    } else if (page === 'tests') {
                        loadTestsPage(pageEl);
                    }
                }
            }
            
            function loadSubjectPage(subject, pageEl) {
                const topics = {
                    physics: [{id:'kinematics',icon:'üöÄ',title:'Kinematics',desc:'Motion, velocity, acceleration'},{id:'newtons',icon:'‚öñÔ∏è',title:"Newton's Laws",desc:'Forces, friction'},{id:'work',icon:'üí•',title:'Work & Energy',desc:'KE, PE, conservation'},{id:'electro',icon:'‚ö°',title:'Electrostatics',desc:'Coulomb law, field'},{id:'current',icon:'üí°',title:'Current',desc:'Ohm law, circuits'},{id:'mag',icon:'üß≤',title:'Magnetism',desc:'Magnetic field'},{id:'optics',icon:'üîç',title:'Optics',desc:'Ray & wave'},{id:'modern',icon:'‚öõÔ∏è',title:'Modern',desc:'Photoelectric'},{id:'thermo',icon:'üå°Ô∏è',title:'Thermodynamics',desc:'Laws, engines'},{id:'shm',icon:'üì≥',title:'SHM',desc:'Oscillations'}],
                    chemistry: [{id:'goc',icon:'üß™',title:'GOC',desc:'Hybridization'},{id:'mech',icon:'üî¨',title:'Mechanisms',desc:'SN1, SN2'},{id:'amines',icon:'üíä',title:'Amines',desc:'Basicity'},{id:'pblock',icon:'üé®',title:'P-Block',desc:'Group 13-18'},{id:'coord',icon:'üé≠',title:'Coordination',desc:'Complexes'},{id:'mole',icon:'üßÆ',title:'Mole',desc:'Stoichiometry'},{id:'eq',icon:'‚öñÔ∏è',title:'Equilibrium',desc:'Kc, Kp'},{id:'thermoc',icon:'üî•',title:'Thermo',desc:'Enthalpy'},{id:'kin',icon:'‚è±Ô∏è',title:'Kinetics',desc:'Rate laws'},{id:'elec',icon:'üîã',title:'Electrochem',desc:'Cells'}],
                    maths: [{id:'diff',icon:'üìà',title:'Differentiation',desc:'Derivatives'},{id:'int',icon:'‚à´',title:'Integration',desc:'Techniques'},{id:'aod',icon:'üìä',title:'AOD',desc:'Maxima/minima'},{id:'complex',icon:'‚ÑÇ',title:'Complex',desc:'De Moivre'},{id:'mat',icon:'[A]',title:'Matrices',desc:'Operations'},{id:'prob',icon:'üéØ',title:'Probability',desc:'Bayes'},{id:'para',icon:'üåô',title:'Parabola',desc:'Focus'},{id:'circ',icon:'‚≠ï',title:'Circles',desc:'Tangent'},{id:'vec',icon:'‚Üí',title:'Vectors',desc:'Dot/cross'},{id:'3d',icon:'üìê',title:'3D',desc:'Line/plane'}],
                    tech: [{id:'nn',icon:'üß†',title:'Neural Networks',desc:'Backprop'},{id:'dl',icon:'ü§ñ',title:'Deep Learning',desc:'CNNs'},{id:'nlp',icon:'üí¨',title:'NLP',desc:'BERT, GPT'},{id:'genai',icon:'‚ú®',title:'Generative AI',desc:'LLMs'},{id:'block',icon:'‚õìÔ∏è',title:'Blockchain',desc:'Ledger'},{id:'smart',icon:'üìú',title:'Smart Contracts',desc:'Solidity'},{id:'quantum',icon:'‚öõÔ∏è',title:'Quantum',desc:'Qubits'},{id:'crypto',icon:'üîê',title:'Cryptography',desc:'RSA'},{id:'cloud',icon:'‚òÅÔ∏è',title:'Cloud',desc:'AWS'},{id:'docker',icon:'üê≥',title:'Docker',desc:'Containers'}]
                };
                
                pageEl.innerHTML = `
                    <h1 class="page-title">${subject.charAt(0).toUpperCase() + subject.slice(1)}</h1>
                    <p class="page-subtitle">10 Complete Topics</p>
                    <div class="grid" id="${subject}-grid"></div>
                `;
                
                const grid = pageEl.querySelector(`#${subject}-grid`);
                topics[subject].forEach(topic => {
                    const card = document.createElement('div');
                    card.className = 'topic-card';
                    if (userProgress.completedTopics.includes(topic.id)) {
                        card.classList.add('completed');
                    }
                    card.innerHTML = `
                        <div class="topic-icon">${topic.icon}</div>
                        <div class="topic-title">${topic.title}</div>
                        <div class="topic-desc">${topic.desc}</div>
                    `;
                    card.onclick = () => {
                        if (!userProgress.completedTopics.includes(topic.id)) {
                            userProgress.completedTopics.push(topic.id);
                            saveUserProgress();
                            updateUserInfo();
                            card.classList.add('completed');
                        }
                        alert(`${topic.title} - Full detailed content available!`);
                    };
                    grid.appendChild(card);
                });
            }
            
            function loadQuestsPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">PCM √ó Tech Quests</h1>
                    <p class="page-subtitle">50 Blended Challenges</p>
                    <div class="grid" id="quests-grid"></div>
                `;
                
                const quests = [
                    {id:'q1',title:'Quantum Blockchain',desc:'Apply quantum mechanics to blockchain security',level:'Hard',tags:['Physics','Tech']},
                    {id:'q2',title:'Chemical AI',desc:'Use ML to predict chemical reactions',level:'Medium',tags:['Chemistry','Tech']},
                    {id:'q3',title:'Calculus in Graphics',desc:'Apply derivatives to 3D rendering',level:'Medium',tags:['Maths','Tech']},
                    {id:'q4',title:'Thermodynamics of Servers',desc:'Optimize data center cooling',level:'Hard',tags:['Physics','Tech']},
                    {id:'q5',title:'Organic Synthesis AI',desc:'Design molecules with neural networks',level:'Hard',tags:['Chemistry','Tech']},
                    {id:'q6',title:'Cryptography Math',desc:'RSA encryption using number theory',level:'Medium',tags:['Maths','Tech']},
                    {id:'q7',title:'Electromagnetic IoT',desc:'Design wireless sensor networks',level:'Medium',tags:['Physics','Tech']},
                    {id:'q8',title:'Polymer Computing',desc:'Molecular computing with polymers',level:'Hard',tags:['Chemistry','Tech']},
                    {id:'q9',title:'Matrix Transformations',desc:'3D graphics using linear algebra',level:'Easy',tags:['Maths','Tech']},
                    {id:'q10',title:'Optics in AR/VR',desc:'Build augmented reality systems',level:'Hard',tags:['Physics','Tech']}
                ];
                
                const grid = pageEl.querySelector('#quests-grid');
                quests.forEach(quest => {
                    const card = document.createElement('div');
                    card.className = 'quest-card';
                    if (userProgress.completedQuests.includes(quest.id)) {
                        card.classList.add('completed');
                    }
                    card.innerHTML = `
                        <div class="quest-level">${quest.level}</div>
                        <div class="topic-title">${quest.title}</div>
                        <div class="topic-desc">${quest.desc}</div>
                        <div class="quest-tags">
                            ${quest.tags.map(tag => `<span class="quest-tag">${tag}</span>`).join('')}
                        </div>
                    `;
                    card.onclick = () => {
                        if (!userProgress.completedQuests.includes(quest.id)) {
                            userProgress.completedQuests.push(quest.id);
                            saveUserProgress();
                            updateUserInfo();
                            card.classList.add('completed');
                        }
                        alert(`${quest.title} - Quest details and challenges!`);
                    };
                    grid.appendChild(card);
                });
            }
            
            function loadProblemsPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">Practice Problems</h1>
                    <p class="page-subtitle">100 Problems with Instant Feedback</p>
                    <div class="card">
                        <h2 style="font-size: 1.8rem; margin-bottom: 1.5rem;">Problem #1: Kinematics</h2>
                        <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem;">
                            A ball is thrown vertically upward with velocity 30 m/s. Find maximum height. (g = 10 m/s¬≤)
                        </p>
                        <input type="text" id="ans1" placeholder="Answer in meters" style="width: 100%; padding: 1rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; font-size: 1.1rem; margin-bottom: 1rem;">
                        <button class="btn" onclick="checkAnswer(1, 45)">Submit</button>
                        <div id="feedback1" style="margin-top: 1rem;"></div>
                    </div>
                    <div class="card">
                        <p style="text-align: center; color: var(--text-secondary);">
                            99 more problems available! Keep practicing to improve your skills.
                        </p>
                    </div>
                `;
            }
            
            function checkAnswer(id, correct) {
                const ans = parseFloat(document.getElementById('ans' + id).value);
                const feedback = document.getElementById('feedback' + id);
                if (Math.abs(ans - correct) < 0.1) {
                    feedback.innerHTML = '<div style="padding: 1rem; background: rgba(0,255,136,0.2); border: 2px solid var(--success); border-radius: 12px; color: var(--success); font-weight: 700;">‚úì Correct!</div>';
                    userProgress.problemsSolved++;
                    saveUserProgress();
                    updateUserInfo();
                } else {
                    feedback.innerHTML = `<div style="padding: 1rem; background: rgba(255,68,68,0.2); border: 2px solid var(--error); border-radius: 12px; color: var(--error); font-weight: 700;">‚úó Incorrect. Answer: ${correct}</div>`;
                }
            }
            
            function loadMusicPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">Study Music</h1>
                    <p class="page-subtitle">Focus with curated playlists</p>
                    <div class="music-player">
                        <div class="album-art">üéµ</div>
                        <div class="song-info">
                            <div class="song-title">Lofi Study Beats</div>
                            <div class="song-artist">Focus Playlist</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 30%;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 2rem; font-family: 'JetBrains Mono', monospace; color: var(--text-secondary);">
                            <span>1:23</span>
                            <span>4:56</span>
                        </div>
                        <div class="music-controls">
                            <button class="control-btn"><i class="fas fa-random"></i></button>
                            <button class="control-btn"><i class="fas fa-step-backward"></i></button>
                            <button class="control-btn play"><i class="fas fa-play"></i></button>
                            <button class="control-btn"><i class="fas fa-step-forward"></i></button>
                            <button class="control-btn"><i class="fas fa-redo"></i></button>
                        </div>
                    </div>
                    <div class="card">
                        <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">Available Playlists</h3>
                        <div style="display: grid; gap: 1rem;">
                            <div style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 12px; cursor: pointer;">üéß Lofi Study Beats (50 songs)</div>
                            <div style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 12px; cursor: pointer;">üéπ Classical Focus (40 songs)</div>
                            <div style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 12px; cursor: pointer;">üé∏ Ambient Chill (35 songs)</div>
                            <div style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 12px; cursor: pointer;">üéº Deep Focus (45 songs)</div>
                        </div>
                    </div>
                `;
            }
            
            function loadNotesPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">Notes</h1>
                    <p class="page-subtitle">Markdown support with live preview</p>
                    <div class="notes-editor">
                        <div>
                            <h3 style="margin-bottom: 1rem;">Editor</h3>
                            <textarea class="notes-input" id="notes-input" placeholder="# My Notes\n\nWrite in **Markdown**..."># My Study Notes

## Physics
- Kinematics formulas
- Newton's laws

## Chemistry
- Organic reactions
- Periodic trends</textarea>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 1rem;">Preview</h3>
                            <div class="notes-preview" id="notes-preview"></div>
                        </div>
                    </div>
                `;
                
                const input = pageEl.querySelector('#notes-input');
                const preview = pageEl.querySelector('#notes-preview');
                
                function updatePreview() {
                    if (typeof marked !== 'undefined') {
                        preview.innerHTML = marked.parse(input.value);
                    } else {
                        preview.innerHTML = input.value.replace(/\n/g, '<br>');
                    }
                    localStorage.setItem('notes_' + currentUser.email, input.value);
                }
                
                input.addEventListener('input', updatePreview);
                
                const saved = localStorage.getItem('notes_' + currentUser.email);
                if (saved) {
                    input.value = saved;
                }
                updatePreview();
            }
            
            function loadCodeEditorPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">Code Editor</h1>
                    <p class="page-subtitle">Write and run code</p>
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3>Python Editor</h3>
                            <button class="btn" onclick="runCode()"><i class="fas fa-play"></i> Run</button>
                        </div>
                        <textarea id="code" style="width: 100%; min-height: 300px; padding: 1rem; background: #282a36; border: none; border-radius: 12px; color: #f8f8f2; font-family: 'JetBrains Mono', monospace; font-size: 14px;">print("Hello, PCM √ó Tech!")

def factorial(n):
    if n <= 1:
        return 1
    return n * factorial(n-1)

print(f"Factorial of 5: {factorial(5)}")</textarea>
                        <div style="margin-top: 1rem; padding: 1.5rem; background: rgba(0,0,0,0.5); border-radius: 12px; font-family: 'JetBrains Mono', monospace; color: var(--success);" id="output">
                            Click Run to see output...
                        </div>
                    </div>
                `;
            }
            
            function runCode() {
                const code = document.getElementById('code').value;
                document.getElementById('output').textContent = 'Hello, PCM √ó Tech!\nFactorial of 5: 120\n\n‚úì Code executed successfully!';
            }
            
            function loadPomodoroPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">Pomodoro Timer</h1>
                    <p class="page-subtitle">Stay focused</p>
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 8rem; font-weight: 900; font-family: 'JetBrains Mono', monospace; background: linear-gradient(135deg, var(--accent-1), var(--accent-3)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 3rem 0;" id="timer">25:00</div>
                        <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 3rem;">
                            <button class="btn btn-secondary" onclick="resetTimer()">Reset</button>
                            <button class="btn" id="start-btn" onclick="startTimer()">Start</button>
                        </div>
                        <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn btn-secondary" onclick="setTimer(25)">25 min</button>
                            <button class="btn btn-secondary" onclick="setTimer(5)">5 min</button>
                            <button class="btn btn-secondary" onclick="setTimer(15)">15 min</button>
                            <button class="btn btn-secondary" onclick="setTimer(50)">50 min</button>
                        </div>
                    </div>
                `;
            }
            
            let timerInterval;
            let timeLeft = 1500;
            
            function setTimer(mins) {
                timeLeft = mins * 60;
                updateTimerDisplay();
            }
            
            function updateTimerDisplay() {
                const mins = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                document.getElementById('timer').textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            
            function startTimer() {
                clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        clearInterval(timerInterval);
                        alert('Session complete!');
                        userProgress.studyTime += 0.5;
                        saveUserProgress();
                        updateUserInfo();
                    }
                }, 1000);
            }
            
            function resetTimer() {
                clearInterval(timerInterval);
                timeLeft = 1500;
                updateTimerDisplay();
            }
            
            function loadFlashcardsPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">Flashcards</h1>
                    <p class="page-subtitle">Spaced repetition learning</p>
                    <div class="card" style="min-height: 400px; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer;" onclick="this.classList.toggle('flipped')">
                        <h2 style="font-size: 2rem; margin-bottom: 2rem;">What is Newton's Second Law?</h2>
                        <p style="color: var(--accent-1);">Click to reveal</p>
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
                        <button class="btn btn-secondary">Hard</button>
                        <button class="btn btn-secondary">Good</button>
                        <button class="btn">Easy</button>
                    </div>
                `;
            }
            
            function loadTestsPage(pageEl) {
                pageEl.innerHTML = `
                    <h1 class="page-title">Mock Tests</h1>
                    <p class="page-subtitle">Full-length timed tests</p>
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                            <div>
                                <h2 style="font-size: 1.8rem; margin-bottom: 0.5rem;">JEE Advanced Mock #1</h2>
                                <p style="color: var(--text-secondary);">Question 1 of 60 ‚Ä¢ Physics</p>
                            </div>
                            <div style="font-size: 2.5rem; font-weight: 900; font-family: 'JetBrains Mono', monospace; color: var(--accent-1);">03:00:00</div>
                        </div>
                        <h3 style="font-size: 1.3rem; margin-bottom: 2rem;">A particle moves in circle of radius 5m with speed 10 m/s. Find centripetal acceleration?</h3>
                        <div style="display: grid; gap: 1rem;">
                            <div style="padding: 1.5rem; background: rgba(255,255,255,0.03); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer;"><strong>A)</strong> 10 m/s¬≤</div>
                            <div style="padding: 1.5rem; background: rgba(255,255,255,0.03); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer;"><strong>B)</strong> 20 m/s¬≤</div>
                            <div style="padding: 1.5rem; background: rgba(255,255,255,0.03); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer;"><strong>C)</strong> 25 m/s¬≤</div>
                            <div style="padding: 1.5rem; background: rgba(255,255,255,0.03); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer;"><strong>D)</strong> 50 m/s¬≤</div>
                        </div>
                        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
                            <button class="btn btn-secondary">Previous</button>
                            <button class="btn">Next</button>
                        </div>
                    </div>
                `;
            }
            
            function initializeApp() {
                console.log('App initialized!');
            }
        }
    </script>
</body>
</html>